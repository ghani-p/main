"use strict";var ApplicationConfiguration=function(){var e="mean",n=["ngResource","ngAnimate","ngMessages","ngAria","ui.router","ui.bootstrap","ui.utils","angularFileUpload","angularMoment"],a=function(n,a){angular.module(n,a||[]),angular.module(e).requires.push(n)};return{applicationModuleName:e,applicationModuleVendorDependencies:n,registerModule:a}}();
"use strict";angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies),angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider","$httpProvider",function(o,t){o.html5Mode(!0).hashPrefix("!"),t.interceptors.push("authInterceptor")}]),angular.module(ApplicationConfiguration.applicationModuleName).run(["Accessibility",function(o){o.inject()}]),angular.module(ApplicationConfiguration.applicationModuleName).run(["$rootScope","$state","Authentication",function(o,t,n){function i(o,n){o.data&&o.data.ignoreState||(t.previous={state:o,params:n,href:t.href(o,n)})}o.$on("$stateChangeStart",function(o,a,e,r,l){if(a.data&&a.data.roles&&a.data.roles.length>0){var u=!1;a.data.roles.forEach(function(o){if(void 0!==n.user.roles&&n.user.roles.indexOf(o)!==-1)return u=!0,!0}),u||(o.preventDefault(),void 0!==n.user&&"object"==typeof n.user?t.go("forbidden"):t.go("authentication.signin").then(function(){i(a,e)}))}}),o.$on("$stateChangeSuccess",function(o,t,n,a,e){i(a,e)})}]),angular.element(document).ready(function(){if(window.location.hash&&"#_=_"===window.location.hash)if(window.history&&history.pushState)window.history.pushState("",document.title,window.location.pathname);else{var o={top:document.body.scrollTop,left:document.body.scrollLeft};window.location.hash="",document.body.scrollTop=o.top,document.body.scrollLeft=o.left}angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])});
!function(i){"use strict";i.registerModule("alerts")}(ApplicationConfiguration);
"use strict";ApplicationConfiguration.registerModule("core"),ApplicationConfiguration.registerModule("core.admin",["core"]),ApplicationConfiguration.registerModule("core.admin.routes",["ui.router"]);
"use strict";ApplicationConfiguration.registerModule("users",["core","ui.sortable"]),ApplicationConfiguration.registerModule("users.admin",["core.admin"]),ApplicationConfiguration.registerModule("users.admin.routes",["core.admin.routes"]);
"use strict";ApplicationConfiguration.registerModule("pronouns");
!function(){"use strict";function n(n){}angular.module("alerts").run(n),n.$inject=["Menus"]}();
!function(){"use strict";function e(e){e.state("alerts",{"abstract":!0,url:"/alerts",template:"<ui-view/>"}).state("alerts.list",{url:"",templateUrl:"modules/alerts/client/views/list-alerts.client.view.html",controller:"AlertsListController",controllerAs:"vm",data:{pageTitle:"Alerts List"}}).state("alerts.open",{url:"/open",templateUrl:"modules/alerts/client/views/open-alerts.client.view.html",controller:"OpenAlertsController",controllerAs:"vm",data:{pageTitle:"Alerts"}}).state("alerts.view",{url:"/:alertId",templateUrl:"modules/alerts/client/views/view-alert.client.view.html",controller:"AlertsController",controllerAs:"vm",resolve:{alertResolve:t},data:{pageTitle:"Alert"}})}function t(e,t){return t.get({alertId:e.alertId}).$promise}angular.module("alerts").config(e),e.$inject=["$stateProvider"],t.$inject=["$stateParams","AlertsService"]}();
!function(){"use strict";function e(e,t,r,o){function l(){confirm("Are you sure you want to delete?")&&n.alert.$remove(t.go("alerts.list"))}var n=this;n.authentication=r,n.alert=o,n.error=null,n.remove=l}angular.module("alerts").controller("AlertsController",e),e.$inject=["$scope","$state","Authentication","alertResolve"]}();
!function(){"use strict";function t(t,e){e.document.title="Sent Alerts";var r=this;r.alerts=t.query()}angular.module("alerts").controller("AlertsListController",t),t.$inject=["AlertsService","$window"]}();
!function(){"use strict";function e(e,t){t.document.title="Alerts";var r=this;r.alerts=e.open()}angular.module("alerts").controller("OpenAlertsController",e),e.$inject=["AlertsService","$window"]}();
!function(){"use strict";function e(e){return e("api/alerts/:alertId",{alertId:"@_id"},{update:{method:"PUT"},open:{method:"GET",url:"api/alerts/open",isArray:!0}})}angular.module("alerts").factory("AlertsService",e),e.$inject=["$resource"]}();
"use strict";angular.module("core.admin").run(["Menus",function(n){n.addMenuItem("topbar",{title:"Admin",state:"admin",type:"dropdown",roles:["admin"]})}]);
"use strict";angular.module("core.admin.routes").config(["$stateProvider",function(a){a.state("admin",{"abstract":!0,url:"/admin",template:"<ui-view/>",data:{roles:["admin"]}})}]);
"use strict";angular.module("core").config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise(function(e,t){e.get("$state").transitionTo("not-found",null,{location:!1})}),e.state("home",{url:"/",templateUrl:"modules/core/client/views/home.client.view.html"}).state("faq",{url:"/faq",templateUrl:"modules/core/client/views/faq.client.view.html"}).state("sitemap",{url:"/sitemap",templateUrl:"modules/core/client/views/sitemap.client.view.html"}).state("not-found",{url:"/not-found",templateUrl:"modules/core/client/views/404.client.view.html",data:{ignoreState:!0}}).state("bad-request",{url:"/bad-request",templateUrl:"modules/core/client/views/400.client.view.html",data:{ignoreState:!0}}).state("forbidden",{url:"/forbidden",templateUrl:"modules/core/client/views/403.client.view.html",data:{ignoreState:!0}})}]);
"use strict";angular.module("core").controller("ServiceAlertsController",["$scope",function(e){e.alerts=[{type:"warning",msg:"Pronouny is running a new alerts module. You may experience issues with alert processing. You can report issues to hello@pronouny.xyz or on Github."}],e.closeAlert=function(o){e.alerts.splice(o,1)}}]);
"use strict";angular.module("core").controller("FaqController",["$scope","$window","$sce","Authentication","Users","Profile",function(e,t,o,n,a,s){t.document.title="FAQ",e.authentication=n,e.user=n.user,e.faqs=[{title:"How do I add a set of pronouns to my profile?",content:'Click on "Pronouns" in the menu when you are logged in. Browse through the public and private pronoun lists and click "+" to add pronouns to your profile.'},{title:"What if my pronouns don't exist in the list yet?",content:'Go to "Pronouns" and click on "Create new". Now enter your information. Then you can click the "+" icon on the page and add it right away. If you choose to make the pronoun "listed", it will be reviewed by a staff member later and additional details may appear on the page. Making the pronoun "listed" means that it will appear on the public list and any user will be allowed to use it.'},{title:"Can I order my pronouns by preference?",content:'Yes, you can go to the "update pronouns" page and drag to re-order pronouns.'},{title:'Why don\'t I have the option to make a "non-standard" pronoun public?',content:'This is a security precaution. Non-standard pronouns have the potential to be much more personal than simple standard ones. Users are not allowed to make them public at this time to prevent issues with other users using pronouns which are intended to be personal. If you think the list is missing a non-standard pronoun, you can email <a href="mailto:me@falkirks.com">me@falkirks.com</a> and it can be added.'},{title:"Can pronouns be edited after they are submitted?",content:'Yes, but only if you do <b>not</b> check the "listed" box. If you check "listed", the pronoun will be publicly available and only staff members will be able to make revisions to it.'},{title:'What are "suggested" users? How does Pronouny pick them?',content:"Suggested users are people Pronouny thinks you may be interested in following. To generate the suggested users list, Pronouny finds the users that are followed by the people you follow and ranks them by the times they are followed by people you follow. You can have up to 10 suggested users and they will be updated every 10 minutes."}];for(var i=0;i<e.faqs.length;i++)e.faqs[i].content=o.trustAsHtml(e.faqs[i].content)}]);
"use strict";angular.module("core").controller("HeaderController",["$scope","$state","Authentication","Menus",function(e,t,o,n){e.$state=t,e.authentication=o,e.menu=n.getMenu("topbar"),e.isCollapsed=!1,e.toggleCollapsibleMenu=function(){e.isCollapsed=!e.isCollapsed},e.$on("$stateChangeSuccess",function(){e.isCollapsed=!1})}]);
"use strict";angular.module("core").controller("HomeController",["$scope","$http","$window","Authentication","Users","Profile","Pronouns",function(o,n,e,r,s,l,t){function u(o,n){for(var e,r,s=o.slice(0),l=o.length;l--;)r=Math.floor((l+1)*Math.random()),e=s[r],s[r]=s[l],s[l]=e;return s.slice(0,n)}e.document.title="Pronouny",o.authentication=r,o.user=r.user,o.following=[],o.searchResults=[],o.selectedUser=void 0,o.pronouns=[],o.randomPronouns=void 0,o.easyPronouns=["she","he","they"],t.query(function(n){o.pronouns=n,console.log(o.pronouns),o.pickRandomPronouns()}),o.pickRandomPronouns=function(){o.randomPronouns=u(o.pronouns,Math.min(3,o.pronouns.length));for(var n=0;n<o.randomPronouns.length;n++)if(o.easyPronouns.indexOf(o.randomPronouns[n].subject)>-1)return;for(var e=o.easyPronouns[Math.floor(Math.random()*o.easyPronouns.length)],r=0;r<o.pronouns.length;r++)if(o.pronouns[r].subject===e)return void(o.randomPronouns[0]=o.pronouns[r]);console.log("Error: One of the defined easy pronouns was not available.")},o.reloadFollowing=function(){o.following=[],o.user&&n.get("/api/users/me/following").then(function(n){null!==n.data.following&&(o.following=n.data.following,0===o.following.length&&(o.user.following=[])),console.log(n)})},o.getUsers=function(e){return n.get("/api/users/search/"+e).then(function(n){for(var e=n.data.length-1;e>=0;e--)(n.data[e]._id===o.user._id||o.user.following.indexOf(n.data[e]._id)>-1)&&n.data.splice(e,1);return o.searchResults=n.data,n.data})},o.addFollowing=function(){if(console.log(o.selectedUser),void 0!==o.selectedUser&&o.selectedUser._id&&o.selectedUser._id!==o.user._id){var n=new s(o.user);n.following.push(o.selectedUser._id),n.$update(function(n){o.selectedUser=void 0,r.user=n,o.user=r.user,o.reloadFollowing()},function(n){o.error=n.data.message})}},o.reloadFollowing()}]);
"use strict";angular.module("core").controller("SitemapController",["$scope","$window","$sce","Authentication","Users","Profile",function(e,t,o,i,n,r){t.document.title="Sitemap",e.authentication=i,e.user=i.user}]);
"use strict";angular.module("core").directive("showErrors",["$timeout","$interpolate",function(r,e){var n=function(n,o,s,t){var a,i,u,c,l,h,f=!1,m=!1;if(c=n.$eval(s.showErrors)||{},l=c.showSuccess||!1,a=o[0].querySelector(".form-control[name]")||o[0].querySelector("[name]"),u=angular.element(a),i=e(u.attr("name")||"")(n),!i)throw"show-errors element has no child input elements with a 'name' attribute class";var d=function(){return r(function(){o.removeClass("has-error"),o.removeClass("has-success"),m=!1},0,!1)};n.$watch(function(){return t[i]&&t[i].$invalid},function(r){return h(r)}),n.$on("show-errors-check-validity",function(r,e){if(angular.isUndefined(e)||t.$name===e)return f=!0,m=!0,h(t[i].$invalid)}),n.$on("show-errors-reset",function(r,e){if(angular.isUndefined(e)||t.$name===e)return d()}),h=function(r){if(o.toggleClass("has-error",m&&r),l)return o.toggleClass("has-success",m&&!r)}};return{restrict:"A",require:"^form",compile:function(r,e){if(e.showErrors.indexOf("skipFormGroupCheck")===-1&&!r.hasClass("form-group")&&!r.hasClass("input-group"))throw"show-errors element does not have the 'form-group' or 'input-group' class";return n}}}]);
"use strict";angular.module("core").service("Accessibility",["Authentication",function(e){this.injectCss=function(e,t){if(!document.getElementById(e)){var n=document.getElementsByTagName("head")[0],s=document.createElement("link");s.id=e,s.rel="stylesheet",s.type="text/css",s.href=t,s.media="all",n.appendChild(s)}},this.inject=function(){if(e.user&&e.user.featureToggles.indexOf("font")>-1){var t=document.createElement("style");t.innerHTML="body { font-family: 'OpenDyslexic' !important; }",document.body.appendChild(t)}if(e.user&&e.user.featureToggles.indexOf("textSize")>-1){var n=document.createElement("style");n.innerHTML="body,h1,h2,h3,h4,h5,p,span,button,a { font-size: "+e.user.textSize+"px !important;}",document.body.appendChild(n),this.injectCss("navBreak","/nav-break.css")}e.user&&e.user.featureToggles.indexOf("contrast")>-1&&this.injectCss("contrastCss","/accessibility.css")}}]);
"use strict";angular.module("core").service("Menus",[function(){this.defaultRoles=["user","admin"],this.menus={};var e=function(e){if(~this.roles.indexOf("*"))return!0;if(!e)return!1;for(var t in e.roles)for(var s in this.roles)if(this.roles[s]===e.roles[t])return!0;return!1};this.validateMenuExistance=function(e){if(e&&e.length){if(this.menus[e])return!0;throw new Error("Menu does not exist")}throw new Error("MenuId was not provided")},this.getMenu=function(e){return this.validateMenuExistance(e),this.menus[e]},this.addMenu=function(t,s){return s=s||{},this.menus[t]={roles:s.roles||this.defaultRoles,items:s.items||[],shouldRender:e},this.menus[t]},this.removeMenu=function(e){this.validateMenuExistance(e),delete this.menus[e]},this.addMenuItem=function(t,s){if(s=s||{},this.validateMenuExistance(t),this.menus[t].items.push({title:s.title||"",state:s.state||"",type:s.type||"item","class":s["class"],roles:null===s.roles||"undefined"==typeof s.roles?this.defaultRoles:s.roles,position:s.position||0,items:[],shouldRender:e}),s.items)for(var i in s.items)this.addSubMenuItem(t,s.state,s.items[i]);return this.menus[t]},this.addSubMenuItem=function(t,s,i){i=i||{},this.validateMenuExistance(t);for(var n in this.menus[t].items)this.menus[t].items[n].state===s&&this.menus[t].items[n].items.push({title:i.title||"",state:i.state||"",roles:null===i.roles||"undefined"==typeof i.roles?this.menus[t].items[n].roles:i.roles,position:i.position||0,shouldRender:e});return this.menus[t]},this.removeMenuItem=function(e,t){this.validateMenuExistance(e);for(var s in this.menus[e].items)this.menus[e].items[s].state===t&&this.menus[e].items.splice(s,1);return this.menus[e]},this.removeSubMenuItem=function(e,t){this.validateMenuExistance(e);for(var s in this.menus[e].items)for(var i in this.menus[e].items[s].items)this.menus[e].items[s].items[i].state===t&&this.menus[e].items[s].items.splice(i,1);return this.menus[e]},this.addMenu("topbar",{roles:["*"]})}]);
"use strict";angular.module("core").service("Socket",["Authentication","$state","$timeout",function(t,e,i){this.connect=function(){t.user&&(this.socket=io())},this.connect(),this.on=function(t,e){this.socket&&this.socket.on(t,function(t){i(function(){e(t)})})},this.emit=function(t,e){this.socket&&this.socket.emit(t,e)},this.removeListener=function(t){this.socket&&this.socket.removeListener(t)}}]);
"use strict";angular.module("users.admin").run(["Menus",function(e){e.addSubMenuItem("topbar","admin",{title:"Manage Users",state:"admin.users"})}]);
"use strict";angular.module("users.admin.routes").config(["$stateProvider",function(e){e.state("admin.users",{url:"/users",templateUrl:"modules/users/client/views/admin/list-users.client.view.html",controller:"UserListController"}).state("admin.user",{url:"/users/:userId",templateUrl:"modules/users/client/views/admin/view-user.client.view.html",controller:"UserController",resolve:{userResolve:["$stateParams","Admin",function(e,r){return r.get({userId:e.userId})}],ownedPronounsResolve:["$stateParams","$http","$q",function(e,r,s){var t=s.defer();return r.get("/api/pronouns/user/"+e.userId,{}).then(function(e){t.resolve(e.data)},function(e){t.resolve([])}),t.promise}]}}).state("admin.user-edit",{url:"/users/:userId/edit",templateUrl:"modules/users/client/views/admin/edit-user.client.view.html",controller:"UserController",resolve:{userResolve:["$stateParams","Admin",function(e,r){return r.get({userId:e.userId})}],ownedPronounsResolve:["$stateParams","$http","$q",function(e,r,s){var t=s.defer();return r.get("/api/pronouns/user/"+e.userId,{}).then(function(e){t.resolve(e.data)},function(e){t.resolve([])}),t.promise}]}})}]);
"use strict";angular.module("users").config(["$httpProvider",function(e){e.interceptors.push(["$q","$location","Authentication",function(e,t,s){return{responseError:function(n){switch(n.status){case 401:s.user=null,t.path("signin");break;case 403:}return e.reject(n)}}}])}]),angular.module("users").run(["Menus",function(e){e.addMenuItem("topbar",{title:"Names",state:"names",roles:["user"]}),e.addMenuItem("topbar",{title:"Nouns",state:"nouns",roles:["user"]}),e.addMenuItem("topbar",{title:"Relations",state:"relations",roles:["user"]})}]);
"use strict";angular.module("users").config(["$stateProvider",function(e){e.state("settings",{"abstract":!0,url:"/settings",templateUrl:"modules/users/client/views/settings/settings.client.view.html",data:{roles:["user","admin"]}}).state("settings.profile",{url:"/profile",templateUrl:"modules/users/client/views/settings/edit-profile.client.view.html"}).state("settings.names",{url:"/names",templateUrl:"modules/users/client/views/settings/update-names.client.view.html"}).state("settings.password",{url:"/password",templateUrl:"modules/users/client/views/settings/change-password.client.view.html"}).state("settings.accounts",{url:"/accounts",templateUrl:"modules/users/client/views/settings/manage-social-accounts.client.view.html"}).state("settings.picture",{url:"/picture",templateUrl:"modules/users/client/views/settings/change-profile-picture.client.view.html"}).state("settings.alerts",{url:"/alerts",templateUrl:"modules/users/client/views/settings/manage-alerts.client.view.html"}).state("settings.features",{url:"/accessibility",templateUrl:"modules/users/client/views/settings/accessibility-features.client.view.html"}).state("authentication",{"abstract":!0,url:"/authentication",templateUrl:"modules/users/client/views/authentication/authentication.client.view.html"}).state("authentication.signup",{url:"/signup",templateUrl:"modules/users/client/views/authentication/signup.client.view.html"}).state("authentication.signin",{url:"/signin?err",templateUrl:"modules/users/client/views/authentication/signin.client.view.html"}).state("password",{"abstract":!0,url:"/password",template:"<ui-view/>"}).state("password.forgot",{url:"/forgot",templateUrl:"modules/users/client/views/password/forgot-password.client.view.html"}).state("password.reset",{"abstract":!0,url:"/reset",template:"<ui-view/>"}).state("password.reset.invalid",{url:"/invalid",templateUrl:"modules/users/client/views/password/reset-password-invalid.client.view.html"}).state("password.reset.success",{url:"/success",templateUrl:"modules/users/client/views/password/reset-password-success.client.view.html"}).state("password.reset.form",{url:"/:token",templateUrl:"modules/users/client/views/password/reset-password.client.view.html"}).state("profile",{url:"/u/:username",templateUrl:"modules/users/client/views/user-profile.client.view.html",controller:"UserProfileController",resolve:{profileResolve:["$stateParams","Profile",function(e,t){return t.byUsername({username:e.username})}],followersResolve:["$stateParams","Followers",function(e,t){return t.byUsername({username:e.username})}]}}).state("profileDEPRECATED",{url:"/users/:username",templateUrl:"modules/users/client/views/user-profile.client.view.html",controller:"UserProfileController",resolve:{profileResolve:["$stateParams","Profile",function(e,t){return t.byUsername({username:e.username})}],followersResolve:["$stateParams","Followers",function(e,t){return t.byUsername({username:e.username})}]}}).state("relations",{url:"/relations",templateUrl:"modules/users/client/views/relations.client.view.html"}).state("names",{url:"/names",templateUrl:"modules/users/client/views/update-names.client.view.html"}).state("nouns",{url:"/nouns",templateUrl:"modules/users/client/views/nouns.client.view.html"}).state("welcome",{templateUrl:"modules/users/client/views/welcome.client.view.html",params:{destination:"home",params:[]}})}]);
"use strict";angular.module("users").controller("AuthenticationController",["$scope","$state","$http","$location","$window","Accessibility","Authentication","PasswordValidator",function(e,r,o,t,i,s,n,a){i.document.title="Authenticate",e.authentication=n,e.popoverMsg=a.getPopoverMsg(),e.showSignedUpMsg=!1,e.error=t.search().err,e.authentication.user&&t.path("/"),e.signup=function(t){return e.error=null,t?void o.post("/api/auth/signup",e.credentials).success(function(o){e.authentication.user=o,r.go(r.previous.state.name||"home",r.previous.params),r.go("welcome",{destination:r.previous.state.name||"home",params:r.previous.params})}).error(function(r){e.error=r.message}):(e.$broadcast("show-errors-check-validity","userForm"),!1)},e.signin=function(t){return e.error=null,t?void o.post("/api/auth/signin",e.credentials).success(function(o){e.authentication.user=o,s.inject(),r.go(r.previous.state.name||"home",r.previous.params)}).error(function(r){e.error=r.message}):(e.$broadcast("show-errors-check-validity","userForm"),!1)},e.callOauthProvider=function(e){r.previous&&r.previous.href&&(e+="?redirect_to="+encodeURIComponent(r.previous.href)),i.location.href=e}}]);
"use strict";angular.module("users").controller("NounsController",["$scope","$http","$window","Authentication","Users","Profile",function(e,n,o,s,r,d){o.document.title="Update nouns",e.authentication=s,e.user=s.user,e.needsSave=!1,e.nouns=["man","woman","boyfriend","girlfriend","boy","girl","enby","enbyfriend","husband","wife","partner"],e.newGood="",e.newBad="",e.error={},e.suggestSave=function(){e.needsSave=!0},e.removeNoun=function(n){var o=e.user.nouns.goodWords.indexOf(n);o>-1?(e.user.nouns.goodWords.splice(o,1),e.suggestSave()):(o=e.user.nouns.badWords.indexOf(n),o>-1&&(e.user.nouns.badWords.splice(o,1),e.suggestSave()))},e.addGood=function(){e.newGood=e.newGood.trim(),""!==e.newGood&&e.user.nouns.goodWords.indexOf(e.newGood)===-1&&e.user.nouns.badWords.indexOf(e.newGood)===-1&&(e.user.nouns.goodWords.push(e.newGood),e.suggestSave()),e.newGood=""},e.addBad=function(){e.newBad=e.newBad.trim(),""!==e.newBad&&e.user.nouns.goodWords.indexOf(e.newBad)===-1&&e.user.nouns.badWords.indexOf(e.newBad)===-1&&(e.user.nouns.badWords.push(e.newBad),e.suggestSave()),e.newBad=""},e.updateUser=function(n){var o=new r(e.user);o.$update(function(o){s.user=o,e.user=o,e.needsSave=!1,n()},function(o){e.error=o.data.message,n(o)})},e.sendAlerts=function(){n.post("/api/alerts",{}).then(function(n){e.error.alert=n.message,e.user.canSendAlert=!1},function(n){e.error.alert=n.message,e.user.canSendAlert=!1})},e.saveAndAlert=function(){e.needsSave&&e.updateUser(function(){e.sendAlerts()})}}]);
"use strict";angular.module("users").controller("PasswordController",["$scope","$stateParams","$http","$location","$window","Authentication","PasswordValidator",function(s,r,e,o,t,a,n){t.document.title="Reset password",s.authentication=a,s.popoverMsg=n.getPopoverMsg(),s.authentication.user&&o.path("/"),s.askForPasswordReset=function(r){return s.success=s.error=null,r?void e.post("/api/auth/forgot",s.credentials).success(function(r){s.credentials=null,s.success=r.message}).error(function(r){s.credentials=null,s.error=r.message}):(s.$broadcast("show-errors-check-validity","forgotPasswordForm"),!1)},s.resetUserPassword=function(t){return s.success=s.error=null,t?void e.post("/api/auth/reset/"+r.token,s.passwordDetails).success(function(r){s.passwordDetails=null,a.user=r,o.path("/password/reset/success")}).error(function(r){s.error=r.message}):(s.$broadcast("show-errors-check-validity","resetPasswordForm"),!1)}}]);
"use strict";angular.module("users").controller("UserProfileController",["$scope","$stateParams","$window","Authentication","Users","Pronouns","$q","profileResolve","followersResolve",function(e,o,r,i,l,n,f,s,t){r.document.title=o.username+" on Pronouny",e.authentication=i,e.username=o.username,e.badRequest=!1,e.limits={friends:5,followers:5,following:5},f.all([s.$promise,t.$promise]).then(function(o){console.log("hhyeieygye"),e.profile=o[0],e.profile.followers=o[1],e.createFriendList()})["catch"](function(o){e.badRequest=!0});var u=function(e,o){var r;return o.length>e.length&&(r=o,o=e,e=r),e.filter(function(e){for(var r=0;r<o.length;r++)if(o[r]._id===e._id)return!0;return!1})},p=function(e,o){return e.filter(function(e){for(var r=0;r<o.length;r++)if(o[r]._id===e._id)return!1;return!0})};e.createFriendList=function(){e.profile.friends=u(e.profile.following,e.profile.followers),e.profile.followers=p(e.profile.followers,e.profile.friends),e.profile.following=p(e.profile.following,e.profile.friends)},e.user=i.user,e.addFollowing=function(){if(e.profile._id!==e.user._id){var o=new l(e.user);o.following.push(e.profile._id),o.$update(function(o){i.user=o,e.user=o;for(var r=e.profile.following.length-1;r>=0;r--)if(e.profile.following[r]._id===e.user._id)return e.profile.following.splice(r,1),void e.profile.friends.push(e.user);e.profile.followers.push(e.user)},function(o){e.error=o.data.message})}},e.removeFollowing=function(){if(e.profile._id!==e.user._id){var o=new l(e.user);o.following.splice(o.following.indexOf(e.profile._id),1),o.$update(function(o){i.user=o,e.user=o;for(var r=e.profile.followers.length-1;r>=0;r--)e.profile.followers[r]._id===e.user._id&&e.profile.followers.splice(r,1);for(var l=e.profile.friends.length-1;l>=0;l--)e.profile.friends[l]._id===e.user._id&&(e.profile.friends.splice(l,1),e.profile.following.push(e.user))},function(o){e.error=o.data.message})}},e.loadMore=function(o){e.limits[o]=e.profile[o].length+5}}]);
"use strict";angular.module("users").controller("RelationsController",["$scope","$http","$window","Authentication","Users","Profile",function(e,s,t,o,n,l){t.document.title="Relations",e.authentication=o,e.user=o.user,e.following=[],e.searchResults=[],e.selectedUser=void 0,e.suggestedUsers=!1,e.reloadFollowing=function(){e.following=[],e.user&&s.get("/api/users/me/following").then(function(s){null!==s.data.following&&(e.following=s.data.following),console.log(s)})},e.getUsers=function(t){return s.get("/api/users/search/"+t).then(function(s){for(var t=s.data.length-1;t>=0;t--)(s.data[t]._id===e.user._id||e.user.following.indexOf(s.data[t]._id)>-1)&&s.data.splice(t,1);return e.searchResults=s.data,s.data})},e.getSuggested=function(t){return s.get("/api/users/suggested").then(function(s){e.suggestedUsers=s.data})},e.addFollowing=function(){if(console.log(e.selectedUser),void 0!==e.selectedUser&&e.selectedUser._id&&e.selectedUser._id!==e.user._id){var s=new n(e.user);s.following.push(e.selectedUser._id),s.$update(function(s){e.selectedUser=void 0,o.user=s,e.user=o.user,e.reloadFollowing()},function(s){e.error=s.data.message})}},e.reloadFollowing(),e.getSuggested()}]);
"use strict";angular.module("users").controller("UpdateNamesController",["$scope","$http","$location","$window","Users","Authentication",function(e,n,s,a,r,t){a.document.title="Update names",e.user=t.user,e.names=e.user.names,e.newName="",void 0!==e.user.displayName&&null!==e.user.displayName&&0===e.names.length&&(e.names[0]=e.user.displayName,e.user.displayName=null),e.addName=function(){e.newName.length>0&&(e.names.push(e.newName),e.saveAndAlert(),e.newName="")},e.removeName=function(n){e.names.splice(e.names.indexOf(n),1),e.saveAndAlert()},e.updateUser=function(n){e.user.names=e.names;var s=new r(e.user);s.$update(function(s){e.success=!0,t.user=s,e.user=t.user,e.names=e.user.names,n()},function(s){e.error=s.data.message,n(s)})},e.sendAlerts=function(){n.post("/api/alerts",{}).then(function(n){e.error.alert=n.message,e.user.canSendAlert=!1},function(n){e.error.alert=n.message,e.user.canSendAlert=!1})},e.saveAndAlert=function(){e.updateUser(function(){e.sendAlerts()})}}]);
"use strict";angular.module("users").controller("WelcomeController",["$scope","$state","$http","$window","Authentication","Users","Profile",function(e,n,s,r,t,o,a){r.document.title="Welcome!",e.authentication=t,e.user=t.user,e.clicks=[],e.navigateAway=function(){n.go(n.params.destination,n.params.params)},e.registerClick=function(n){e.clicks[n]=!0},e.hasSavedData=function(n){switch(n){case"pronouns":return e.user.pronouns.length>0;case"names":return e.user.names.length>0;case"nouns":return void 0!==e.user.nouns.nounType||e.user.nouns.goodWords.length>0||e.user.nouns.badWords.length>0||void 0!==e.user.nouns.otherInfo&&""!==e.user.nouns.otherInfo;case"relations":return e.user.following.length>0;case"alerts":return e.user.alertChannels.length>0;default:return!1}},e.wasClicked=function(n){return e.clicks[n]===!0||e.hasSavedData(n)?"active":""},e.wasAllClicked=function(n){return e.wasClicked("pronouns")&&e.wasClicked("names")&&e.wasClicked("nouns")&&e.wasClicked("relations")&&e.wasClicked("alerts")}}]);
"use strict";angular.module("users").directive("passwordValidator",["PasswordValidator",function(r){return{require:"ngModel",link:function(o,e,s,n){n.$validators.requirements=function(e){var s=!0;if(e){var n=r.getResult(e),t=0,g=[{color:"danger",progress:"20"},{color:"warning",progress:"40"},{color:"info",progress:"60"},{color:"primary",progress:"80"},{color:"success",progress:"100"}];n.errors.length<g.length&&(t=g.length-n.errors.length-1),o.requirementsColor=g[t].color,o.requirementsProgress=g[t].progress,n.errors.length?(o.popoverMsg=r.getPopoverMsg(),o.passwordErrors=n.errors,s=!1):(o.popoverMsg="",o.passwordErrors=[],s=!0)}return s}}}}]);
"use strict";angular.module("users").directive("passwordVerify",[function(){return{require:"ngModel",scope:{passwordVerify:"="},link:function(r,e,s,i){r.$watch(function(){var e;return(r.passwordVerify||i)&&(e=r.passwordVerify+"_"+i),e},function(e){e&&(i.$validators.passwordVerify=function(e){var s=r.passwordVerify;return s===e})})}}}]);
"use strict";angular.module("users").directive("lowercase",function(){return{require:"ngModel",link:function(e,r,s,n){n.$parsers.push(function(e){return e?e.toLowerCase():""}),r.css("text-transform","lowercase")}}});
"use strict";angular.module("users").factory("Authentication",["$window",function(r){var u={user:r.user};return u}]);
"use strict";angular.module("users").factory("PasswordValidator",["$window",function(r){var e=r.owaspPasswordStrengthTest;return{getResult:function(r){var a=e.test(r);return a},getPopoverMsg:function(){var r="Please enter a passphrase or password with greater than 10 characters, numbers, lowercase, upppercase, and special characters.";return r}}}]);
"use strict";angular.module("users").factory("Users",["$resource",function(e){return e("api/users",{},{update:{method:"PUT"}})}]),angular.module("users").factory("Profile",["$resource",function(e){return e("api/users/profile/get/:id/:username",{username:"@username",id:"@id"},{byUsername:{method:"GET",url:"api/users/profile/username/:username"},byId:{method:"GET",url:"api/users/profile/id/:id"}})}]),angular.module("users").factory("Followers",["$resource",function(e){return e("api/users/followers/get/:id/:username",{username:"@username",id:"@id"},{byUsername:{method:"GET",url:"api/users/followers/username/:username",isArray:!0},byId:{method:"GET",url:"api/users/followers/id/:id",isArray:!0}})}]),angular.module("users.admin").factory("Admin",["$resource",function(e){return e("api/users/:userId",{userId:"@_id"},{update:{method:"PUT"}})}]);
"use strict";angular.module("pronouns").run(["Menus",function(n){n.addMenuItem("topbar",{title:"Pronouns",state:"pronouns.update",roles:["user"]})}]);
"use strict";angular.module("pronouns").config(["$stateProvider",function(e){e.state("pronouns",{"abstract":!0,url:"/pronouns",template:"<ui-view/>"}).state("pronouns.list",{url:"/list","abstract":!0,template:"<ui-view/>"}).state("pronouns.list.all",{url:"/public",templateUrl:"modules/pronouns/client/views/list-pronouns.client.view.html",controller:"PronounListController"}).state("pronouns.list.mine",{url:"/mine",templateUrl:"modules/pronouns/client/views/my-pronouns.client.view.html",controller:"MyPronounListController"}).state("pronouns.create",{url:"/create",templateUrl:"modules/pronouns/client/views/create-pronoun.client.view.html",data:{roles:["user","admin"]}}).state("pronouns.update",{url:"",templateUrl:"modules/pronouns/client/views/update-pronouns.client.view.html",controller:"UpdatePronounsController"}).state("pronouns.view",{url:"/:pronounId",templateUrl:"modules/pronouns/client/views/view-pronoun.client.view.html"}).state("pronouns.edit",{url:"/:pronounId/edit",templateUrl:"modules/pronouns/client/views/edit-pronoun.client.view.html",data:{roles:["user","admin"]}})}]);
"use strict";angular.module("pronouns").controller("CreatePronounController",["$scope","$stateParams","$location","$window","Users","Authentication","Pronouns",function(o,n,e,r,t,s,u){r.document.title="Create pronoun set",o.authentication=s,o.user=s.user,o.pronoun={},o.pronounType="X",o.setType=function(n){o.pronounType=n},o.submit=function(n){if(o.error=null,!n)return o.$broadcast("show-errors-check-validity","pronounForm"),!1;var r={};console.log(o.pronounType),"X"===o.pronounType&&(r=new u({subject:o.pronoun.subject,object:o.pronoun.object,determiner:o.pronoun.determiner,possessive:o.pronoun.possessive,reflexive:o.pronoun.reflexive,title:o.pronoun.title,pronounType:"X",listed:o.pronoun.listed===!0})),"M"===o.pronounType&&(r=new u({content:o.pronoun.content,title:o.pronoun.title,pronounType:"M",listed:o.pronoun.listed===!0&&o.user.roles.indexOf("admin")!==-1})),r.$save(function(n){e.path("pronouns/"+n._id),o.subject="",o.object="",o.determiner="",o.possessive="",o.reflexive="",o.title="",o.content=""},function(n){console.log(n),o.error=n.data.message})}}]);
"use strict";angular.module("pronouns").controller("PronounListController",["$scope","$filter","$window","Users","Authentication","Pronouns",function(e,t,n,r,i,u){n.document.title="Public pronoun list",e.authentication=i,e.user=i.user,u.query(function(t){e.pronouns=t,e.buildPager()}),e.buildPager=function(){e.pagedItems=[],e.itemsPerPage=15,e.currentPage=1,e.figureOutItemsToDisplay()},e.figureOutItemsToDisplay=function(){e.filteredItems=t("filter")(e.pronouns,{$:e.search}),e.filterLength=e.filteredItems.length;var n=(e.currentPage-1)*e.itemsPerPage,r=n+e.itemsPerPage;e.pagedItems=e.filteredItems.slice(n,r)},e.pageChanged=function(){e.figureOutItemsToDisplay()}}]);
"use strict";angular.module("pronouns").controller("MyPronounListController",["$http","$scope","$filter","$window","Users","Authentication","Pronouns",function(e,t,n,r,i,o,s){r.document.title="Private pronouns list",t.authentication=o,t.user=o.user,s.mine(function(e){t.pronouns=e,t.buildPager()}),t.buildPager=function(){t.pagedItems=[],t.itemsPerPage=15,t.currentPage=1,t.figureOutItemsToDisplay()},t.figureOutItemsToDisplay=function(){t.filteredItems=n("filter")(t.pronouns,{$:t.search}),t.filterLength=t.filteredItems.length;var e=(t.currentPage-1)*t.itemsPerPage,r=e+t.itemsPerPage;t.pagedItems=t.filteredItems.slice(e,r)},t.pageChanged=function(){t.figureOutItemsToDisplay()}}]);
"use strict";angular.module("pronouns").controller("PronounsController",["$scope","$stateParams","$http","$location","$window","Users","Authentication","Pronouns",function(n,o,r,e,u,t,s,i){u.document.title="Pronouns",n.authentication=s,n.user=s.user,n.pronounType="X",n.hasPronoun=function(o){for(var r=0;r<n.user.pronouns.length;r++)if(n.user.pronouns[r]===o)return!0;return!1},n.makeMine=function(o){var r=new t(n.user);r.pronouns.push(o._id),r.$update(function(o){s.user=o,n.user=o,n.sendAlerts()},function(o){n.error=o.data.message})},n.sendAlerts=function(){r.post("/api/alerts",{}).then(function(o){n.error.alert=o.message,n.user.canSendAlert=!1},function(o){n.error.alert=o.message,n.user.canSendAlert=!1})},n.removeMine=function(o){var r=new t(n.user);r.pronouns.splice(r.pronouns.indexOf(o._id),1),r.$update(function(o){s.user=o,n.user=o,n.sendAlerts()},function(o){n.error=o.data.message})},n.remove=function(o){if(o){o.$remove();for(var r in n.pronouns)n.pronouns[r]===o&&n.pronouns.splice(r,1)}else n.pronoun.$remove(function(){e.path("pronouns")})},n.update=function(o){if(n.error=null,!o)return n.$broadcast("show-errors-check-validity","pronounForm"),!1;var r=n.pronoun;r.$update(function(){e.path("pronouns/"+r._id)},function(o){n.error=o.data.message})},n.find=function(){n.pronouns=i.query()},n.findOne=function(){n.pronoun=i.get({pronounId:o.pronounId}),console.log(n.pronoun)}}]);
"use strict";angular.module("pronouns").controller("UpdatePronounsController",["$scope","$q","$state","$http","$location","$filter","$window","moment","Users","Authentication","Profile","Pronouns",function(e,n,r,o,s,t,i,u,a,l,c,p){e.showCongratsTo=["falk","tom catyr todd"],i.document.title="Update pronouns",e.user=l.user,e.error={alert:""},e.congrats={},e.congrats.text=0,e.congrats.show=!1;var f=n.defer();c.byId({id:l.user._id},function(e){f.resolve(e.pronouns)}),e.pronouns=f.promise,e.myList=null,e.publicList=null,e.resolved=!1,e.canSave=!1,n.all([e.pronouns,p.mine().$promise,p.query().$promise]).then(function(n){e.pronouns=n[0],e.myList=n[1],e.publicList=n[2];for(var r=e.publicList.length-1;r>=0;r--)for(var o=0;o<e.pronouns.length;o++)if(e.publicList[r]._id===e.pronouns[o]._id){e.publicList.splice(r,1);break}for(var s=e.myList.length-1;s>=0;s--)for(var t=0;t<e.pronouns.length;t++)if(console.log(s),e.myList[s]._id===e.pronouns[t]._id){e.myList.splice(s,1);break}e.buildPager(),e.resolved=!0}),e.buildPager=function(){e.pagedItems=[],e.itemsPerPage=5,e.currentPage=1,e.figureOutItemsToDisplay()},e.figureOutItemsToDisplay=function(n){e.filteredItems=t("filter")(e.publicList,{$:n}),e.filterLength=e.filteredItems.length;var r=(e.currentPage-1)*e.itemsPerPage,o=r+e.itemsPerPage;e.pagedItems=e.filteredItems.slice(r,o)},e.pageChanged=function(n){e.currentPage=n,e.figureOutItemsToDisplay()},e.sortableOptions={stop:function(n,r){e.canSave=!0}},e.sendAlerts=function(){o.post("/api/alerts",{}).then(function(n){e.error.alert=n.message,e.user.canSendAlert=!1},function(n){e.error.alert=n.message,e.user.canSendAlert=!1})},e.saveAndAlert=function(){e.canSave&&e.updateUser(function(){e.sendAlerts()})},e.removeMine=function(n){for(var r=0;r<e.pronouns.length;r++)if(e.pronouns[r]._id===n._id){e.pronouns.splice(r,1);break}n.listed?(e.publicList.push(n),e.figureOutItemsToDisplay()):e.myList.push(n),e.canSave=!0},e.addMine=function(n){var r=n.listed,o=-1;if(r){for(var s=0;s<e.publicList.length;s++)if(e.publicList[s]._id===n._id){o=s;break}}else for(var t=0;t<e.myList.length;t++)if(e.myList[t]._id===n._id){o=t;break}o>-1&&(e.pronouns.push(n),r?(e.publicList.splice(o,1),e.figureOutItemsToDisplay()):e.myList.splice(o,1),e.canSave=!0)},e.replicatePronouns=function(){e.user.pronouns=[];for(var n=0;n<e.pronouns.length;n++)e.user.pronouns.push(e.pronouns[n]._id)},e.goCreate=function(){r.go("pronouns.create")},e.updateUser=function(n){e.showCongratsMessage(),e.replicatePronouns();var r=new a(e.user);r.$update(function(r){l.user=r,e.user=l.user,e.canSave=!1,n()},function(r){e.error=r.data.message,n()})},e.showCongratsMessage=function(){e.showCongratsTo.indexOf(e.user.username)>-1&&(console.log(e.user.pronounTimeBest),e.congrats.newBest=Date.now()-u(e.user.lastPronounUpdateAt).valueOf()>e.user.pronounTimeBest,e.congrats.text=u(e.user.lastPronounUpdateAt).fromNow(),e.congrats.show=!0,e.congrats.bestScore=u.duration(e.user.pronounTimeBest).humanize())}}]);
"use strict";angular.module("pronouns").factory("Pronouns",["$resource",function(n){return n("api/pronouns/:pronounId",{pronounId:"@_id"},{update:{method:"PUT"},mine:{method:"GET",url:"api/pronouns/mine",isArray:!0}})}]);
"use strict";angular.module("core").factory("authInterceptor",["$q","$injector",function(t,e){return{responseError:function(n){if(!n.config.ignoreAuthModule)switch(n.status){case 401:e.get("$state").transitionTo("authentication.signin");break;case 403:e.get("$state").transitionTo("forbidden")}return t.reject(n)}}}]);
"use strict";angular.module("users.admin").controller("UserListController",["$scope","$filter","$window","Admin",function(e,t,r,i){r.document.title="User List",i.query(function(t){e.users=t,e.buildPager()}),e.buildPager=function(){e.pagedItems=[],e.itemsPerPage=15,e.currentPage=1,e.figureOutItemsToDisplay()},e.figureOutItemsToDisplay=function(){e.filteredItems=t("filter")(e.users,{$:e.search}),e.filterLength=e.filteredItems.length;var r=(e.currentPage-1)*e.itemsPerPage,i=r+e.itemsPerPage;e.pagedItems=e.filteredItems.slice(r,i)},e.pageChanged=function(){e.figureOutItemsToDisplay()}}]);
"use strict";angular.module("users.admin").controller("UserController",["$scope","$state","$window","Authentication","userResolve","ownedPronounsResolve",function(e,r,o,n,s,u){e.authentication=n,e.user=s,e.ownedPronouns=u,o.document.title="Manage "+e.user.username,e.remove=function(o){confirm("Are you sure you want to delete this user?")&&(o?(o.$remove(),e.users.splice(e.users.indexOf(o),1)):e.user.$remove(function(){r.go("admin.users")}))},e.update=function(o){if(!o)return e.$broadcast("show-errors-check-validity","userForm"),!1;var n=e.user;n.$update(function(){r.go("admin.user",{userId:n._id})},function(r){e.error=r.data.message})}}]);
"use strict";angular.module("users").controller("AccessibilityFeaturesController",["$scope","$http","$location","$window","Users","Authentication",function(e,t,s,r,o,u){r.document.title="Accessibility Features",e.user=u.user,e.features={font:e.user.featureToggles.indexOf("font")>-1,contrast:e.user.featureToggles.indexOf("contrast")>-1,textSize:e.user.featureToggles.indexOf("textSize")>-1},e.updateFeatures=function(t){if(e.success=e.error=null,!t)return e.$broadcast("show-errors-check-validity","userForm"),!1;if(e.user.featureToggles=[],e.features.font){e.user.featureToggles.push("font");var s=document.createElement("style");s.innerHTML="body { font-family: 'OpenDyslexic' !important; }",document.body.appendChild(s)}if(e.features.textSize&&e.user.featureToggles.push("textSize"),e.features.contrast){e.user.featureToggles.push("contrast");var r="contrastCss";if(!document.getElementById(r)){var n=document.getElementsByTagName("head")[0],a=document.createElement("link");a.id=r,a.rel="stylesheet",a.type="text/css",a.href="/accessibility.css",a.media="all",n.appendChild(a)}}var c=new o(e.user);c.$update(function(t){e.$broadcast("show-errors-reset","userForm"),console.log(t),e.success=!0,e.user=t,u.user=t},function(t){console.log(t),e.error=t.data.message})}}]);
"use strict";angular.module("users").controller("ChangePasswordController",["$scope","$http","$window","Authentication",function(s,r,o,e){o.document.title="Change Password",s.user=e.user,s.changeUserPassword=function(o){return s.success=s.error=null,o?void r.post("/api/users/password",s.passwordDetails).success(function(r){s.$broadcast("show-errors-reset","passwordForm"),s.success=!0,s.passwordDetails=null}).error(function(r){s.error=r.message}):(s.$broadcast("show-errors-check-validity","passwordForm"),!1)}}]);
"use strict";angular.module("users").controller("ChangeProfilePictureController",["$scope","$timeout","$window","Authentication","FileUploader",function(e,r,l,u,o){l.document.title="Change Profile Picture",e.user=u.user,e.imageURL=e.user.profileImageURL,e.uploader=new o({url:"api/users/picture",alias:"newProfilePicture"}),e.uploader.filters.push({name:"imageFilter",fn:function(e,r){var l="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(l)!==-1}}),e.uploader.onAfterAddingFile=function(u){if(l.FileReader){var o=new FileReader;o.readAsDataURL(u._file),o.onload=function(l){r(function(){e.imageURL=l.target.result},0)}}},e.uploader.onSuccessItem=function(r,l,o,n){e.success=!0,e.user=u.user=l,e.cancelUpload()},e.uploader.onErrorItem=function(r,l,u,o){e.cancelUpload(),e.error=l.message},e.uploadProfilePicture=function(){e.success=e.error=null,e.uploader.uploadAll()},e.cancelUpload=function(){e.uploader.clearQueue(),e.imageURL=e.user.profileImageURL}}]);
"use strict";angular.module("users").controller("EditProfileController",["$scope","$http","$location","$window","Users","Authentication",function(r,e,s,o,t,u){o.document.title="Edit Profile",r.user=u.user,r.updateUserProfile=function(e){if(r.success=r.error=null,!e)return r.$broadcast("show-errors-check-validity","userForm"),!1;var s=new t(r.user);s.$update(function(e){r.$broadcast("show-errors-reset","userForm"),r.success=!0,u.user=e},function(e){r.error=e.data.message})}}]);
"use strict";angular.module("users").controller("ManageAlertsController",["$scope","$http","$location","$window","Users","Authentication",function(e,s,r,l,a,t){l.document.title="Manage Alerts",e.user=t.user,e.alerts={facebook:e.user.alertChannels.indexOf("facebook")>-1,email:e.user.alertChannels.indexOf("email")>-1,pushbullet:e.user.alertChannels.indexOf("pushbullet")>-1},e.updateAlerts=function(s){if(e.success=e.error=null,!s)return e.$broadcast("show-errors-check-validity","userForm"),!1;e.user.alertChannels=[],e.alerts.facebook&&e.user.alertChannels.push("facebook"),e.alerts.email&&e.user.alertChannels.push("email"),e.alerts.pushbullet&&(e.user.pushbulletKey?e.user.alertChannels.push("pushbullet"):e.alerts.pushbullet=!1);var r=new a(e.user);r.$update(function(s){e.$broadcast("show-errors-reset","userForm"),e.success=!0,e.user=s,t.user=s},function(s){e.error=s.data.message})}}]);
"use strict";angular.module("users").controller("SocialAccountsController",["$scope","$http","$window","Authentication",function(r,e,o,n){o.document.title="Manage Social Accounts",r.user=n.user,r.hasConnectedAdditionalSocialAccounts=function(e){for(var o in r.user.additionalProvidersData)return!0;return!1},r.isConnectedSocialAccount=function(e){return r.user.provider===e||r.user.additionalProvidersData&&r.user.additionalProvidersData[e]},r.removeUserSocialAccount=function(o){r.success=r.error=null,e["delete"]("/api/users/accounts",{params:{provider:o}}).success(function(e){r.success=!0,r.user=n.user=e}).error(function(e){r.error=e.message})}}]);
"use strict";angular.module("users").controller("SettingsController",["$scope","$window","Authentication",function(t,e,n){e.document.title="Settings",t.user=n.user}]);